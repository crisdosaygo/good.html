"use strict";(self.webpackChunkbang_html=self.webpackChunkbang_html||[]).push([[311],{311:function(e,t,n){n.r(t),n.d(t,{c:function(){return V},s:function(){return C}});const o=Math.random().toFixed(18),r=Symbol.for("[[IMMEDIATE]]"),a=q,s=J,l=!1,c=()=>{},i=/(?:<!\-\-)?(key0.\d+)(?:\-\->)?/gm,d=/\w+=/,u="<link rel=join>",f=20,h=()=>"Possible XSS / object forgery attack detected. Object code could not be verified.",p=e=>({message:"Object values not allowed here.",x:e}),m=()=>"Unset values not allowed here.",y=()=>"Error inserting template into DOM. Position must be one of: replace, beforebegin, afterbegin, beforeend, innerhtml, afterend",g=e=>`Error inserting template into DOM. Location ${e} was not found in the document.`,v=new class{beforeend(e,t){t.appendChild(e)}beforebegin(e,t){t.parentNode.insertBefore(e,t)}afterend(e,t){t.parentNode.insertBefore(e,t.nextSibling)}replace(e,t){t.parentNode.replaceChild(e,t)}afterbegin(e,t){t.insertBefore(e,t.firstChild)}innerhtml(e,t){t.replaceChildren(),t.appendChild(e)}insert(e,t){t.replaceChildren(e)}},b=new Map,A=document.createElement("div"),E="beforeend",w="",{stringify:N}=JSON,x=e=>N(e,H,w),k=e=>(e?.code===o||e?.type&&("MarkupObject"===e.type||"MarkupAttrObject"===e.type))&&Array.isArray(e?.nodes),T=()=>"f"+S+++(10*Math.random()).toString(36).replace(".","_"),O=e=>!!e&&("string"==typeof e.key||"number"==typeof e.key)&&Object.getOwnPropertyNames(e).length<=2;let S=10;const j={};async function C(e,...t){const n=this;let o,a,s=!1;0===e[0].length&&t[0].state&&(s=!0);const{key:c}=t.find(O)||{};if(s){({state:o,_host:a}=t.shift()),e.shift(),t=await Promise.all(t.map(e=>F(n,e,o,a)));const r=M(e,t,{_host:a});return l&&console.log({state:o},self.__state=o),r}{const o=async(o,r)=>(l&&console.log({state:o},self.__state=o),t=await Promise.all(t.map(e=>F(n,e,o,r))),M(e,t,{_host:r}));return o[r]=!0,o}}function V(e,...t){return M(e,t,{useCache:!1})}function M(e,t,{useCache:n=!0,_host:r}={}){const a={};let s,c;if(t=t.map(z),n){s=t.find(O)||{},c=e.join(u);const{cached:n,firstCall:o}=function(e,t,n){let o,r=j[e];return null==r?(r=j[e]={},void 0!==n.key&&(r.instances={},r=r.instances[n.key]={}),o=!0):void 0!==n.key?r.instances?(r=r.instances[n.key],r?!0===n.kill?(r=j[e],r&&r.instances&&(r.instances[n.key]=null),r=null,o=!0):o=!1:o=!0):(r.instances={},o=!0):o=!1,{cached:r,firstCall:o}}(c,0,s);if(!o)return n.update(t),n;a.oldVals=Array.from(t)}else a.oldVals=Array.from(t);e=[...e];const i={},d=t.map(function(e){return(t,n)=>{if(O(t))return w;const r="key"+Math.random().toFixed(15);let a=r;return t.code===o&&Array.isArray(t.nodes)&&(a=`\x3c!--${a}--\x3e`),e[r]={vi:n,val:t,replacers:[]},a}}(i)),f=[];let h=w;for(;e.length>1;)h+=e.shift()+d.shift();h+=e.shift();const p=X(h),m=document.createTreeWalker(p,NodeFilter.SHOW_ALL);do{D({walker:m,vmap:i,externals:f})}while(m.nextNode());return Object.assign(a,{externals:f,v:Object.values(i),cacheKey:c,instance:s,to:L,update:Y,code:o,nodes:Array.from(p.childNodes)}),n&&(void 0!==s.key?j[c].instances[s.key]=a:j[c]=a,a.nodes.forEach(e=>{const t=s.key+w;b.set(e,{ck:c,ik:t}),r.destructors.add(()=>{l&&console.log(`Destructor running for ${r.name} to remove vv cache keys`,{cacheKey:c,instanceKey:t}),c&&t&&"undefined"!==t?j[c]&&(j[c].instances[t]=null):c&&(j[c]=null)})})),a}async function F(e,t,n,a){if("string"==typeof t)return t;if("number"==typeof t)return t+w;if("boolean"==typeof t)return t+w;if(t instanceof Date)return t+w;if(_(t)){if(CONFIG.allowUnset)return CONFIG.unsetPlaceholder||w;throw new TypeError(`Value cannot be unset, was: ${t}`)}if(t instanceof Promise)return await F(e,await t.catch(e=>e+w),n,a);if(t instanceof Element)return t.outerHTML;if(t instanceof Node)return t.textContent;if(k(t))return{code:o,externals:t.externals,nodes:t.nodes};const s=Array.isArray(t)&&(0===t.length||k(t[0]));if(null!==(c=t)&&c[Symbol.iterator]instanceof Function){if(s)return Q(t);if(t[0]instanceof Function&&!t[0][r]){const e=$(...t);if(a.names.has(e)){const{func:n,name:o}=a.names.get(e);if(o)return l&&console.log("Name exists!",t,o),l&&console.log(`Adding ${o} adder`,n),a.funcs.add(e=>(e[o]=e[o]||n,o)),o}const n=T();l&&console.log({definedFunction:n,source:1});const o=function(e){for(const n of t)try{n(e)}catch(o){console.warn("Handler in func array failed",{fun:n,e:o,ev:e,x:t})}};return a.names.set(e,{name:n,func:o}),l&&console.log(`Adding ${n} adder`,o,a),a.funcs.add(e=>(e[n]=o,n)),l&&console.log("name",n,o),`${n}(event)`}return t[0]instanceof Element||t[0]instanceof Node?{code:o,externals:[],nodes:t}:F(e,await Promise.all((await Promise.all(Array.from(t)).catch(e=>e+w)).map(t=>F(e,t,n,a))),n,a)}var c;const i=O(t),d=t.code===o&&"string"==typeof t.str;if(i||d||k(t))return t;if(t[r]&&"AsyncFunction"===Object.getPrototypeOf(t).constructor.name)return await F(e,await t(n,a),n,a);if(t[r]&&t instanceof Function)return t(n,a);if(t instanceof Function){const e=$(t);if(a.names.has(e)){const{func:n,name:o}=a.names.get(e);if(o)return l&&console.log("Name exists!",t,o),l&&console.log(`Adding ${o} adder`,n),a.funcs.add(e=>(e[o]=e[o]||n,o)),o}const n=T();return a.names.set(e,{name:n,func:t}),l&&console.log(`Adding ${n} adder`,t,a),a.funcs.add(e=>(e[n]=t,n)),l&&console.log({definedFunction:n,source:2}),l&&console.log("name",n,t),`${n}(event)`}{let n;if(Object.prototype.hasOwnProperty.call(t,CONFIG.bangKey)){n=new e.StateKey(t[CONFIG.bangKey])+w;const o=e.STATE.get(n);e.STATE.delete(o),e.STATE.set(n,t),e.STATE.set(t,n)}else{const o=x(t);if(e.STATE.has(t)||e.STATE.has(o)){n=(e.STATE.get(t)||e.STATE.get(o)).replace(/.json.last$/,"");const r=e.STATE.get(n+".json.last");o!==r&&(e.STATE.delete(r),n.startsWith("system-key")&&(e.STATE.delete(n),n=new e.StateKey+w),e.STATE.set(n,t),e.STATE.set(t,n))}else n=new e.StateKey+w,e.STATE.set(n,t),e.STATE.set(t,n);e.STATE.set(o,n+".json.last"),e.STATE.set(n+".json.last",o)}return n+=w,n}}function $(...e){return`${e.map(e=>e.toString()).join(";")}`}function _(e){return null==e}function L(e,t){const n=(t||"replace").toLocaleLowerCase(),o=document.createDocumentFragment();this.nodes.forEach(e=>o.appendChild(e));const r=e instanceof Node?e:document.querySelector(e);try{v[n](o,r)}catch(t){switch(l&&console.warn(t),t.constructor&&t.constructor.name){case"DOMException":Z({error:y()},t);break;case"TypeError":Z({error:g(e)},t);break;default:throw t}}for(;this.externals.length;)this.externals.shift()()}function D({walker:e,vmap:t,externals:n}){const o=e.currentNode;if(o.shadowRoot instanceof ShadowRoot)throw new TypeError("Shadow not supported here currently");switch(o.nodeType){case Node.ELEMENT_NODE:!function({node:e,vmap:t,externals:n}){R(e).forEach(({name:o,value:r}={})=>{const a={node:e,vmap:t,externals:n,name:o,lengths:[]};i.lastIndex=0;let s=i.exec(o);for(;s;)I(s,a,{updateName:!0}),s=i.exec(o);for(i.lastIndex=0,s=i.exec(r);s;)I(s,a,{updateName:!1}),s=i.exec(r)})}({node:o,vmap:t,externals:n});break;case Node.COMMENT_NODE:case Node.TEXT_NODE:!function({node:e,vmap:t,externals:n}){const o=[],r=e.nodeValue;let a=i.exec(r);for(;a;){const{index:s}=a,c=a[1],d=t[c],u=K({node:e,index:s,lengths:o,val:d}),f=()=>{l&&console.group(`Replacer calling for ${c}`);try{u(d.val)}catch(e){console.warn(`Error in replacer for key ${c}`,{val:d,error:e})}l&&console.log(`Replacer called for ${c}`),P.delete(c),l&&console.groupEnd()};n.push(f),P.set(c,f),d.replacers.push(u),a=i.exec(r)}}({node:o,vmap:t,externals:n})}}Object.assign(C,{attrskip:s,skip:a,attrmarkup:J,markup:q,guardEmptyHandlers:function(e){return Array.isArray(e)?0==e.length?[c]:e:_(e)?c:void 0},die:Z}),Object.assign(globalThis,{vanillaview:{c:V,s:C}});const P=new Map;function K(e){const{node:t}=e,n=Object.assign({},e,{oldVal:{length:f},oldNodes:[t],lastAnchor:t});return e=>{n.oldVal!=e&&(n.val.val=e,"vanillaviewobject"===G(e)?function(e,t){let{oldNodes:n,lastAnchor:o}=t;if(e.nodes.length)if(r=n,a=e.nodes,r.length==a.length&&Array.from(r).every((e,t)=>e==a[t]));else{const n=[];for(Array.from(e.nodes).forEach(e=>{if(document.contains(e.ownerDocument))for(;n.length;){const t=n.shift();e.parentNode.insertBefore(t,e)}else n.push(e)});n.length;){const e=n.shift();o.parentNode.insertBefore(e,o)}t.lastAnchor=e.nodes[e.nodes.length-1]}else{const e=function(e){let t=[...e.parentNode.childNodes].find(e=>e.isConnected&&e.nodeType==Node.COMMENT_NODE&&"vanillaview_placeholder"==e.nodeValue);return t||(t=X("\x3c!--vanillaview_placeholder--\x3e").firstChild),t}(o);o.parentNode.insertBefore(e,o.nextSibling),t.lastAnchor=e}var r,a;const s=(c=n,i=e.nodes,c=new Set(c),i=new Set(i),new Set([...c].filter(e=>!i.has(e))));var c,i;if(s.size){const e=document.createDocumentFragment(),t=new Set;s.forEach(n=>{if(e.appendChild(n),n.linkedCustomElement&&e.appendChild(n.linkedCustomElement),n.nodeType===Node.COMMENT_NODE&&n.textContent.match(/key\d+/))return;const o=b.get(n);o?(t.add(x(o)),[...b.entries()].forEach(([e,o])=>n.contains(e)&&t.add(x(o)))):l&&console.warn("No kill signature for",n,b)}),t.forEach(e=>{const{ck:t,ik:n}=JSON.parse(e);try{t&&n&&"undefined"!==n?j[t]&&(j[t].instances[n]=null):t&&(j[t]=null)}catch(o){console.warn("Error in kill for",{kill:e,cacheKey:t,instanceKey:n})}})}for(t.oldNodes=e.nodes||[o];e.externals.length;)e.externals.shift()()}(e,n):function(e,t){let{oldVal:n,index:o,val:r,lengths:a,node:s}=t;const l=r.vi,c=Object.keys(a.slice(0,l)).length*f,i=a.slice(0,l).reduce((e,t)=>e+t,0),d=s.nodeValue;a[l]=e.length;const u=i-c,h=d.slice(0,o+u)+e+d.slice(o+u+n.length);s.nodeValue=h,s.linkedCustomElement&&h!==n&&function(e){const t=e.linkedCustomElement,n=X(`<span ${e.textContent}></span>`).firstChild,o=new Set(R(t).filter(({name:e})=>!e.startsWith("on")).map(({name:e})=>e));R(n).forEach(({name:e,value:n})=>{e!==t.localName&&(e.startsWith("on")||(t.setAttribute(e,n),o.delete(e)))}),o.forEach(e=>t.removeAttribute(e))}(s),t.oldVal=e}(e,n))}}function I(e,t,{updateName:n}){const{index:o,input:r}=e,a=Object.assign({},t,{index:o,input:r,updateName:n,val:t.vmap[e[1]],oldVal:{length:f},oldName:t.name});let s;s=n?function(e){let{oldName:t,node:n,val:o}=e;return e=>{if(t==e)return;o.val=e;const r=n.hasAttribute(t)?t:w;if(r!==e){if(r&&(n.removeAttribute(t),n[t]=void 0),e){let t,o=e=e.trim();if(d.test(e)){const n=e.indexOf("=");[o,t]=[e.slice(0,n),e.slice(n+1)]}W(n,o,t)}t=e}}}(a):function(e){const t=t=>{if(e.oldVal!=t)switch(e.val.val=t,G(t)){case"funcarray":!function(e,t){let{oldVal:n,node:o,name:r,externals:a}=t;if(n&&!Array.isArray(n)&&(n=[n]),"bond"!==r){let t={};r.includes(":")&&([r,...t]=r.split(":"),t=t.reduce((e,t)=>(e[t]=!0,e),{})),n&&n.forEach(e=>o.removeEventListener(r,e,t)),e.forEach(e=>o.addEventListener(r,e,t))}else n&&n.forEach(e=>{const t=a.indexOf(e);t>=0&&a.splice(t,1)}),e.forEach(e=>a.push(()=>e(o)));t.oldVal=e}(t,e);break;case"function":!function(e,t){let{oldVal:n,node:o,name:r,externals:a}=t;if("bond"!==r){let t={};r.includes(":")&&([r,...t]=r.split(":"),t=t.reduce((e,t)=>(e[t]=!0,e),{})),n&&o.removeEventListener(r,n,t),o.addEventListener(r,e,t),W(o,r,w)}else{if(n){const e=a.indexOf(n);e>=0&&a.splice(e,1)}a.push(()=>e(o))}t.oldVal=e}(t,e);break;case"handlers":!function(e,t){let{oldVal:n,node:o,externals:r}=t;n&&"object"==typeof n&&Object.entries(n).forEach(([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce((e,t)=>(e[t]=!0,e),{})),o.removeEventListener(e,t,n)}else{const e=r.indexOf(t);e>=0&&r.splice(e,1)}}),Object.entries(e).forEach(([e,t])=>{if("bond"!==e){let n={};e.includes(":")&&([e,...n]=e.split(":"),n=n.reduce((e,t)=>(e[t]=!0,e),{})),o.addEventListener(e,t,n)}else r.push(()=>t(o))}),t.oldVal=e}(t,e);break;case"vanillaviewobject":B(t=function(e){const t=document.createDocumentFragment();e.forEach(e=>t.appendChild(e.cloneNode(!0)));const n=document.createElement("body");return n.appendChild(t),n.innerHTML}(t.nodes),e);break;case"markupattrobject":t=t.str;default:B(t,e)}};return t(e.val.val),t}(a),a.externals.push(()=>s(a.val.val)),a.val.replacers.push(s)}function H(e,t){return"function"==typeof this[e]?t.toString():t instanceof Node?`${t.nodeName}//${t.nodeValue||t.outerHTML||t.textContent}`:t}function R(e){return e.hasAttribute?(e.hasAttribute("class")&&e.setAttribute("class",U(e.getAttribute("class"))),Array.from(e.attributes)):[]}function B(e,t){let n,{oldVal:o,node:r,index:a,name:s,val:l,lengths:c,oldAttrVal:i}=t,d=r.getAttribute(s);if(i===o)n=e;else{let r=0;const i=l.vi,u=Object.keys(c.slice(0,i)).length*f;"class"==s&&(0==(e=e.trim()).length&&(r=-1),t.val.val=e),c[i]=e.length+r;const h=c.slice(0,i).reduce((e,t)=>e+t,0)-u,p=d.slice(0,a+h),m=d.slice(a+h+o.length);if("class"==s){const t=0==o.length?" ":w;n=p+t+e+t+m}else n=p+e+m}d!==n&&W(r,s,n),t.oldVal=e,t.oldAttrVal=n}function W(e,t,n){"class"==t&&(n=U(n));const o=t;let r;if(r&&(r=Object.fromEntries(r.map(e=>[e,!0])),l&&console.warn("not handling modifiers currently",{node:e,name:t,value:n,modifiers:r})),CONFIG.EVENTS.includes("on"+t)){t="on"+t;const r=e.getAttribute(t);if(e.getRootNode().host){if(e.getRootNode().host.paths.has(r))return void(l&&console.log("Not running replacement again for",{node:e,name:t,oName:o,value:n,existingValue:r}))}else if(l&&console.warn("No host exists yet"),r?.startsWith("this."))return void(l&&console.log("Not running replacement again for",{node:e,name:t,oName:o,value:n,existingValue:r}))}try{e.setAttribute(t,_(n)?t:n)}catch(o){console.warn("error",o,{node:e,name:t,value:n})}if(t in e&&"style"!==t)try{e[t]=!!_(n)||n}catch(e){}}function G(e){const t=typeof e;return"function"===t?"function":e.code===o&&Array.isArray(e.nodes)?"vanillaviewobject":e.code===o&&"string"==typeof e.str?"markupattrobject":Array.isArray(e)&&(0===e.length||e[0].code===o&&Array.isArray(e[0].nodes))?"vanillaviewarray":!Array.isArray(e)||0!==e.length&&"function"!=typeof e[0]?"object"===t?"handlers":"default":"funcarray"}function q(e){const t=X(e=_(e)?w:e);return{type:"MarkupObject",code:o,nodes:Array.from(t.childNodes),externals:[]}}function J(e){return e=(e=_(e)?w:e).replace(/"/g,"&quot;"),{type:"MarkupAttrObject",code:o,str:e}}function U(e){return(e=e.trim()).replace(/\s+/g," ")}function X(e){return A.replaceChildren(),A.insertAdjacentHTML(E,`<template>${e}</template>`),A.firstElementChild.content}function z(e){const t=Array.isArray(e)&&(0===e.length||k(e[0])),n=_(e),r=e.code!==o&&Array.isArray(e.nodes),a="object"==typeof e;return t?Q(e):O(e)||e.code===o?e:(n&&Z({error:m()}),r&&Z({error:h()}),Array.isArray(e)&&e[0]instanceof Node?{code:o,nodes:e,externals:[]}:Array.isArray(e)&&e[0]instanceof Function?e:(a&&Z({error:p(e)}),e+w))}function Q(e){const t=[],n=[];for(const o of e)t.push(...o.externals),n.push(...o.nodes);return{v:[],code:o,oldVals:[],nodes:n,to:L,update:Y,externals:t}}function Y(e){this.v.filter(({vi:t})=>function(e,t){const[n,o]=[e,t].map(G);let r;if(n!=o)r=!0;else switch(n){case"vanillaviewobject":case"funcarray":case"function":case"vanillaviewarray":case"markupattrobject":r=!0;break;default:r=x(e)!==x(t)}return r}(e[t],this.oldVals[t])).forEach(({vi:t,replacers:n})=>n.forEach(n=>n(e[t]))),this.oldVals=Array.from(e)}function Z(e,t){throw e.stack=(l&&t||new Error).stack.split(/\s*\n\s*/g),e}l&&(window.Replacers=P)}}]);